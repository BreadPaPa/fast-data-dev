
<!DOCTYPE html>
<html>
<head>
  <title>Landoop Kafka Development Environment</title>

  <meta charset=utf-8/>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Landoop Kafka Development Environment">
  <!-- <meta name="keywords"
       content="kafka,schema registry,topics,kafka-topic,kafka-rest,kafka-rest-proxy,kafka management,avro"> -->
  <meta name="author" content="Landoop Team">
  <link rel="shortcut icon" href="schema-registry-ui/src/assets/icons/favicon.png">

  <!-- Angular Material style sheet -->
  <link rel="stylesheet" href="schema-registry-ui/bower_components/angular-material/angular-material.min.css">
  <link rel="stylesheet" href="schema-registry-ui/bower_components/font-awesome/css/font-awesome.min.css">
  <style>
      body {background-color: #F5F5F5;}
      .bigTotal,.details,.tile-heading{text-align:center}
      .bigTotal{font-size:3em;margin:0;padding:0}
      .details{font-size:13px;color:#333}
      .tile-heading{height:16px;line-height:16px;font-weight:400;opacity:.7;font-size:14px;text-transform:uppercase;display:block}
      .summary, .summary-title{text-align:center;font-weight: 500; letter-spacing: .010em; margin: 0;line-height: 1.6em; font-size:12px}
      .summary-title{text-transform:uppercase;padding:10px;text-decoration:none}
      .summary{opacity:.7;padding:0 10px;min-height:30px}
      h1,h2,h3,h4,h5{font-family:Tahoma;font-weight:200;color:#666;padding-left:10px;margin:10px;}
      .card-link{text-decoration:none;cursor:hand}
      .ok{color:#7CAF57; font-size:12px; font-family:Tahoma;}
      .md-list-item-short { height: 25px; min-height: 25px;}
      .important-message { color: #ff6f10; }
      .important-message code { background-color: #FCFCFC; }
      .fdd-head { padding-left:15px; min-height: 48px}
      .fdd-head h3 code a, a:active, a:visited a:hover { text-decoration: none; color: #2a3b4d; font-size: 14px;}
      .fdd-head h3 code { font-size: 14px;}
      header {background: #444d58;margin-bottom:10px;}
  </style>
</head>

<body ng-app="DockerPage" ng-cloak>

<div ng-controller="MainCtrl" style="background-color: #F5F5F5;">

    <!--Header-->
    <header>
        <div flex layout="row" layout-xs="column">
            <div flex="10"></div>
            <div flex="70">
                <h4 style="color: #fff;letter-spacing: 1px; font-size:14px;"  >
                    <img ng-src="http://www.landoop.com/images/landoop-light.svg" style="width:25px; float:left; padding-right:15px; padding-top: 5px;">
                    <b>FAST-DATA-DEV</b> <br>
                    <span style="color:font-weight:400;opacity:.7;font-size:12px;text-transform:uppercase;letter-spacing: 1.2px;"> Kafka Development Environment</span>
                </h4>
            </div>
            <div flex="20">
                <md-menu-bar style="padding-top:18px;">
                    <!-- <md-menu>
                      <a href="http://www.landoop.com/kafka/fast-data-dev/" target="_blank" style="color:#fff;text-decoration:none; margin: 0 20px;" class="tile-heading">
                        <i class="fa fa-info-circle" aria-hidden="true"></i> About
                      </a>
                    </md-menu> -->
                    <md-menu>
                        <a href="https://github.com/Landoop/fast-data-dev" target="_blank" style="color:#fff; text-decoration:none; margin: 0 20px;" class="tile-heading">
                            <i class="fa fa-question-circle" aria-hidden="true"></i> Help
                        </a>
                    </md-menu>
                </md-menu-bar>
            </div>

        </div>
    </header>

    <!--summaries-->
    <div flex layout="row" layout-xs="column">
        <div flex="10"></div>
        <div flex="80">
            <div flex layout="row" layout-xs="column">

                <!--Schemas-->
                <div flex id="schema-registry">
                    <a href="./schema-registry-ui/" class="card-link">
                        <md-card style="background-color: #2196F3; color: #fff; box-shadow: none;">
                            <md-card-title style="padding-bottom:5px;">
                                <md-card-title-text>
                                    <span class="md-headline tile-heading ">SCHEMAS</span>
                                </md-card-title-text>
                                <!--<md-button class="md-fab md-mini md-primary">S</md-button>-->
                            </md-card-title>
                            <md-card-content>
                                <div layout="row" layout-xs="column" layout-wrap>
                                    <div flex>
                                        <p class="bigTotal">{{schemas}}</p>
                                    </div>
                                </div>
                            </md-card-content>
                            <md-card-actions layout="column" layout-align="start"  style="background-color:#fff;color:#333;margin:0px;height:110px">
                                <div class="summary-title">Schema Registry UI</div>
                                <div class="summary">manage avro schemas</div>
                                <md-button class="md-primary summary" style="margin:5px">ENTER</md-button>
                            </md-card-actions>
                        </md-card>
                    </a>
                </div>

                <!--Topics-->
                <div flex>
                    <md-card style="background-color: #7C4DFF; color: #fff;box-shadow: none; ">
                        <md-card-title style="padding-bottom:5px;">
                            <md-card-title-text>
                                <span class="md-headline tile-heading ">TOPICS</span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content>
                            <div layout="row" layout-xs="column" layout-wrap>
                                <div flex>
                                    <p class="bigTotal">{{topics}}</p>
                                </div>
                            </div>
                        </md-card-content>
                        <md-card-actions layout="column" layout-align="start" style="background-color:#fff;color:#333;margin:0px;height:110px">
                            <div class="summary-title">Kafka Topics UI</div>
                            <div class="summary">browse topics and data</div>
                            <md-button class="md-primary summary" style="margin:5px" ng-href="./kafka-topics-ui/">ENTER</md-button>
                        </md-card-actions>
                    </md-card>
                </div>

                <!--Connectors-->
                <div flex>
                    <md-card style="background-color: #AD1457; color: #fff;box-shadow: none; ">
                        <md-card-title style="padding-bottom:5px;">
                            <md-card-title-text>
                                <span class="md-headline tile-heading ">CONNECTORS</span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content>
                            <div layout="row" layout-xs="column" layout-wrap>
                                <div flex>
                                    <p class="bigTotal">{{connectors}}</p>
                                </div>
                            </div>
                        </md-card-content>
                        <md-card-actions layout="column" layout-align="end center" style="background-color:#fff;color:#333;margin:0px;height:110px">
                            <div class="summary-title">Kafka connect UI</div>
                            <div class="summary">setup &amp; manage connectors</div>
                            <md-button class="md-primary summary" style="margin:5px;" ng-href="./kafka-connect-ui/">ENTER</md-button>
                        </md-card-actions>
                    </md-card>
                </div>

                <!--Brokers-->
                <div flex>
                    <md-card style="background-color: #00BCD4; color: #fff;box-shadow: none;">
                        <md-card-title style="padding-bottom:5px;">
                            <md-card-title-text>
                                <span class="md-headline tile-heading ">Brokers</span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content>
                            <div layout="row" layout-xs="column" layout-wrap>
                                <div flex>
                                    <p class="bigTotal">{{brokers}}</p>
                                </div>
                            </div>
                        </md-card-content>
                        <md-card-actions layout="column" layout-align="start center" style="background-color:#fff;color:#333;margin:0px;height:110px ">
                            <div class="summary-title">Kafka brokers</div>
                            <div class="summary">management and monitoring</div>
                            <!-- <md-button class="md-primary summary" style="margin:5px;color:#558B2F;">Coming soon</md-button> -->
                        </md-card-actions>
                    </md-card>
                </div>
            </div>


            <div flex layout="row" layout-align="start start">

                <div flex="50" layout="column">
                    <!--Services information card-->
                    <md-card flex style="box-shadow: none;">
                        <md-card-title style="padding-bottom:5px;">
                            <md-card-title-text>
                                <span class="md-headline tile-heading"><b>Services Ports</b></span>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content>
                            <md-list>
                                <md-list-item ng-repeat="i in servicesInfo" flex class="md-list-item-short" style="padding: 0">
                                    <div flex="" layout="row" layout-xs="column" class="layout-xs-column layout-row flex">
                                        <div flex class="flex-70">
                                            <h5>{{i.port}} : {{i.name}}</h5>
                                        </div>
                                        <div flex class="flex-30">
                                            <h5 class="ng-binding" style="color: #AAA;">{{i.jmx}}</h5>
                                        </div>
                                    </div>
                                </md-list-item>
                            </md-list>
                        </md-card-content>
                    </md-card>

                    <!--Running Services card-->
                    <md-card flex="50" style="box-shadow: none;">
                        <md-card-header>
                            <md-card-header-text>
                              <span class="md-headline tile-heading" ><i class="fa fa-cogs" aria-hidden="true" style="margin-bottom:10px"></i>
                                <br><b>Running Services</b></span>
                            </md-card-header-text>
                        </md-card-header>
                        <md-card-content>
                            <md-list>
                                <md-list-item ng-repeat="service in runningServices" class="md-2-line md-long-text" style="margin: -0.4em;">
                                    <div class="md-list-item-text">
                                        <h4 class="tile-heading" style="text-align:left;font-size:12px">
                                            <i class="fa fa-check-square-o" aria-hidden="true" style="font-size:14px; color:green"></i> <b>{{service.name}}</b></h4>
                                        <p style="font-size:12px;">{{service.description}}</p>
                                    </div>
                                </md-list-item>
                            </md-list>
                        </md-card-content>
                        <md-card-content style="background-color:#eaeaea;">
                            <div flex layout-align="center center">
                                <p class="summary">
                                    Find the best version for you
                                    <a style="text-decoration:none;" href="https://hub.docker.com/r/landoop/fast-data-dev/tags/" target="_blank">here</a>.
                                </p>
                            </div>
                        </md-card-content>
                    </md-card>
                </div>
                <div flex="50" layout="column">
                    <!-- Coyote -->
                    <md-card flex="50" style="box-shadow: none;">
                        <md-card-title style="padding-bottom:5px;">
                            <md-card-title-text>
                                <span class="md-headline tile-heading"><b>Coyote Health Checks</b></span>
                                <p class="summary" style="font-size:12px; text-align:center; padding: 5px 0px;">
                                    Your set up is being verified using the Coyote integration testing tool and generates working examples.
                                </p>
                            </md-card-title-text>
                        </md-card-title>
                        <md-card-content style="background-color:#fff; padding: 15px;min-height:220px;">

                            <!--while running-->
                            <div flex layout="row" layout-align="center center" ng-show="running">
                                <md-progress-circular md-mode="indeterminate"></md-progress-circular>
                                <h5>Running...</h5>
                            </div>
                            <!--after run-->
                            <div flex layout="column" layout-align="center center" ng-hide="running">
                                <svg width="40%" height="40%" viewbox="0 0 100 100">
                                    <circle cx="50" cy="50" r="40" fill="transparent"/>
                                    <circle cx="50" cy="50" r="40" fill="transparent" stroke-width="15" stroke="#f4f4f4"/>
                                    <circle cx="50" cy="50" r="40" fill="transparent" stroke-width="15" stroke="#00CCFF" stroke-dasharray="251.2" stroke-dashoffset="{{chartValue}}"/>
                                    <text x="30" y="55" fill="black" font-size="15" style="padding-top:50px;">
                                        {{chartPercentage}}%
                                    </text>
                                </svg>
                                <p class="summary">Passed: {{coyoteResults.passed}} | Failed: {{coyoteResults.failed}}</p>
                                <md-button class="md-raised" href="./coyote-tests/">View Results</md-button>
                            </div>
                        </md-card-content>
                        <md-card-content style="background-color:#eaeaea;">
                            <div flex layout-align="center center">
                                <p class="summary">
                                    Find out more about Coyote awesome tool
                                    <a style="text-decoration:none;" href="https://github.com/Landoop/coyote" target="_blank">here</a>.
                                </p>
                            </div>
                        </md-card-content>
                    </md-card>

                    <!--CLI TOOLS-->
                    <md-card flex="50" style="box-shadow: none;">
                        <md-card-content>
                            <md-card-header-text>
                                <span class="md-headline tile-heading"><b>Kafka CLI Tools</b></span>
                                <p class="summary" style="font-size:12px; text-align:center; padding: 5px 0px;">
                                    Enter the docker bash, and get access to all the KAFKA CLI TOOLS.
                                </p>
                            </md-card-header-text>
                            <div style="background-color:#eaeaea;height:35px;padding-top:10px;">
                                <code> $ docker run --rm -it --net=host landoop/fast-data-dev bash</code>
                            </div>
                            <!--  <p class="summary" style="font-size:12px;padding: 10px 0px 0px;text-align:left">List all topics</p>
                             <div style="background-color:#eaeaea;height:35px;padding-top:10px;margin-bottom:5px">
                               <code> $ kafka-topics --zookeeper localhost:2181 --list</code>
                             </div> -->
                            <p class="summary" style="font-size:12px;padding-top: 10px;text-align:left">Create new topic</p>
                            <div style="background-color:#eaeaea;height:45px;padding-top:5px;margin-bottom:15px">
                                <code> $ kafka-topics --create --zookeeper localhost:2181 --partitions 3 --topic my-topic</code>
                            </div>
                        </md-card-content>
                        <md-card-content style="background-color:#eaeaea;">
                            <div flex layout-align="center center">
                                <p class="summary">
                                    Checkout the <a href="https://github.com/Landoop/kafka-cheat-sheet" target="_blank">Kafka Cheat Sheet</a> to find out about the CLI tools.
                                </p>
                            </div>
                        </md-card-content>
                    </md-card>

                </div>
            </div>

            <div flex layout="row" layout-align="start start">
                <!--News card-->
                <md-card flex="100" style="box-shadow: none;">
                    <md-card-title style="padding-bottom:35px;">
                        <md-card-title-text>
                <span class="md-headline tile-heading">
                  <b><i class="fa fa-newspaper-o" aria-hidden="true" style="margin-bottom:5px"></i><br>
                      Latest Updates</b></span>
                        </md-card-title-text>
                    </md-card-title>
                    <md-card-content>
                        <div flex>

                            <md-list>
                                <md-list-item class="md-2-line md-long-text" style="margin: -0.4em;">
                                    <div class="md-list-item-text">
                                        <h4 class="tile-heading" style="text-align:left;font-size:12px">
                                            <i class="fa fa-arrow-right" aria-hidden="true" style="font-size:14px; color:blue"></i>
                                            <b>SSL support hit master</b>
                                        </h4>
                                        <p style="font-size:13px;">
                                            We added support for a SSL port for the broker. Upon startup, fast-data-dev will create a CA and key-certificate
                                            pairs for kafka and clients. Stay tuned for info on how to enable SSL and use it from your applications.
                                        </p>
                                    </div>
                                </md-list-item>

                                <md-list-item class="md-2-line md-long-text" style="margin: -0.4em;">
                                    <div class="md-list-item-text">
                                        <h4 class="tile-heading" style="text-align:left;font-size:12px">
                                            <i class="fa fa-arrow-right" aria-hidden="true" style="font-size:14px; color:blue"></i>
                                            <b>JMX support added</b>
                                        </h4>
                                        <p style="font-size:13px;">
                                            We now enable JMX by default for the Kafka components and make it available at ports <code>9581-9584</code>.
                                            You can optionally disable it via <code>-e DISABLE_JMX=1</code>.
                                        </p>
                                    </div>
                                </md-list-item>

                                <md-list-item class="md-2-line md-long-text" style="margin: -0.4em;">
                                    <div class="md-list-item-text">
                                        <h4 class="tile-heading" style="text-align:left;font-size:12px">
                                            <i class="fa fa-arrow-right" aria-hidden="true" style="font-size:14px; color:blue"></i>
                                            <b>Kafka does not run as root anymore</b>
                                        </h4>
                                        <p style="font-size:13px;">
                                            This is <strong>important</strong>! Fast Data Dev’s behaviour changed.
                                            Kafka is now running by default as user <code>nobody</code> instead of the superuser (<code>root</code>).
                                            If you need the old behaviour use <code>-e RUN_AS_ROOT=1</code> on your docker command line.
                                        </p>
                                    </div>
                                </md-list-item>
                            </md-list>
                        </div>
                    </md-card-content>
                    <md-card-content style="background-color:#eaeaea;">
                        <div flex layout-align="center center">
                            <p class="summary">
                                Check out all the documentation about <b>landoop/fast-data-dev</b> at our
                                <a style="text-decoration:none;" href="https://github.com/Landoop/fast-data-dev" target="_blank">README</a>.
                            </p>
                        </div>
                    </md-card-content>
                </md-card>
            </div>

        </div>

    </div>

<!--Footer-->
<h6 style="text-align:center;margin-bottom:5px;">Report Issues & Stars!</h6>
<div flex layout="row" layout-align="center center">

  <a class="github-button" href="https://github.com/Landoop/fast-data-dev/issues" data-count-api="/repos/Landoop/fast-data-dev#open_issues_count" data-count-aria-label="# issues on GitHub" aria-label="Issue Landoop/fast-data-dev on GitHub">Issue</a>
  <a class="github-button" href="https://github.com/Landoop/fast-data-dev" data-count-href="/Landoop/fast-data-dev/stargazers" data-count-api="/repos/Landoop/fast-data-dev#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star Landoop/fast-data-dev on GitHub">Star</a>
</div>

<div flex layout="row" layout-align="center center">
  <img ng-src="img/landoop-blue.svg" style="width:20px;float: left;padding-right:5px;">
  <p style="font-size:10px;">powered by <a href="http://www.landoop.com" style="text-decoration:none;color:blue;" target="_blank">Landoop</a></p>
</div>

</div>

<!-- Angular Material requires Angular.js Libraries -->
<script src="schema-registry-ui/bower_components/angular/angular.min.js"></script>
<script src="schema-registry-ui/bower_components/angular-animate/angular-animate.min.js"></script>
<script src="schema-registry-ui/bower_components/angular-aria/angular-aria.min.js"></script>

<!-- Angular Material Library -->
<script src="schema-registry-ui/bower_components/angular-material/angular-material.min.js"></script>

<!--Github Buttons-->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- Place this tag where you want the button to render. -->
<!-- Custom js -->
<script src="env.js"></script>

<script type="text/javascript">

    angular
    .module('DockerPage', ['ngMaterial'])
    .controller('MainCtrl', function ($scope, $http, $log, $timeout, $interval) {

    //LOAD ENV vars
    $scope.runningServices = runningServices;
    $scope.servicesInfo = servicesInfo;

    //SUMMARIES
     this.getSummaries = function (){
    $http.get('/api/schema-registry/subjects/')
      .then(
        function successCallback(response) { $scope.schemas = response.data.length },
        function errorCallback(response) { $log.error("Failure with : " + response) });

    $http.get('/api/kafka-rest-proxy/topics/')
      .then(
        function successCallback(response) { $scope.topics = response.data.length },
        function errorCallback(response) { $log.error("Failure with : " + response) });

    $http.get('/api/kafka-connect/connectors')
      .then(
        function successCallback(response) { $scope.connectors = response.data.length},
        function errorCallback(response) { $log.error("Failure with : " + response) });

    $http.get('/api/kafka-rest-proxy/brokers')
      .then(
        function successCallback(response) { $scope.brokers = response.data.brokers.length },
        function errorCallback(response) { $log.error("Failure with : " + response) });
    };
    //initial invoke
    this.getSummaries();

    //COYOTE
    $scope.running = true;

    function calculateChart(passed, failed) {
      var c = Math.PI * ( 40 * 2); //r=40
      var percentage = (passed * 100) / (passed + failed);
      percentage = Math.round( percentage * 10 ) / 10;
      console.log("percentage " + percentage);
      if (percentage < 0) { percentage = 0;}
      if (percentage > 100) { percentage = 100;}
      $scope.chartValue = ((100-percentage)/100)*c;
      $scope.chartPercentage = percentage;
    }

   this.loadCoyoteResults = function (){
      $http.get('/coyote-tests/results').then(function(response){
              passed = response.data.passed;
              failed = response.data.failed;
              if (passed != 0 || failed != 0) {
                $scope.running = false;
                $scope.coyoteResults = response.data;
                calculateChart(response.data.passed, response.data.failed);
                return;
              }
      });
   };

   //Put in interval, first trigger after 10 seconds
   var theInterval = $interval(function(){
      this.loadCoyoteResults();
      this.getSummaries();
   }.bind(this), 10000);

    $scope.$on('$destroy', function () {
        $interval.cancel(theInterval)
    });

   //invoke initialy
   this.loadCoyoteResults();

    //--- end of controller
    });

</script>

</body>
</html>
